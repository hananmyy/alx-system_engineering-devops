#!/usr/bin/env bash
# Configures UFW to block all incoming traffic except SSH (22), HTTP (80), and HTTPS (443)

# Install UFW if it's not present
apt-get update
apt-get install -y ufw

# Set default to deny all incoming traffic and allow all outgoing traffic
ufw default deny incoming
ufw default allow outgoing

# Allow essential services
ufw allow 22/tcp    # SSH access
ufw allow 80/tcp    # HTTP web traffic
ufw allow 443/tcp   # HTTPS encrypted web traffic

# Enable the firewall with force to skip confirmation
ufw --force enable

# Display current UFW status and rules
ufw status verbose